# Two terminals attempt to create user1, then book the same flight. One of the
# two terminals will succeed in user creation, but both will succeed in
# logging in.  We're testing that one terminal will succeed in paying for the
# flight and the other should fail

# Commands executed in terminal 1
create user1 user1 10000
login user1 user1
search "Boston MA" "Los Angeles CA" 1 3 2
book 1
pay 1
quit
*

# Possible output: Terminal 1 succeeds in user creation and booking and paying
Created user user1
Logged in as user1
Itinerary 0: 1 flight(s), 345 minutes
ID: 719059 Day: 3 Carrier: B6 Number: 687 Origin: Boston MA Dest: Los Angeles CA Duration: 345 Capacity: 1 Price: 609
Itinerary 1: 1 flight(s), 349 minutes
ID: 718966 Day: 3 Carrier: B6 Number: 487 Origin: Boston MA Dest: Los Angeles CA Duration: 349 Capacity: 3 Price: 689
Booked flight(s), reservation ID: 1
Paid reservation: 1 remaining balance: 9311
Goodbye
|

# Possible output: Terminal 1 succeeds in user creation and booking and terminal 2 pays
Created user user1
Logged in as user1
Itinerary 0: 1 flight(s), 345 minutes
ID: 719059 Day: 3 Carrier: B6 Number: 687 Origin: Boston MA Dest: Los Angeles CA Duration: 345 Capacity: 1 Price: 609
Itinerary 1: 1 flight(s), 349 minutes
ID: 718966 Day: 3 Carrier: B6 Number: 487 Origin: Boston MA Dest: Los Angeles CA Duration: 349 Capacity: 3 Price: 689
Booked flight(s), reservation ID: 1
Cannot find unpaid reservation 1 under user: user1
Goodbye
|

# Possible output: Terminal 1 succeeds in user creation, but fails booking and pays
Created user user1
Logged in as user1
Itinerary 0: 1 flight(s), 345 minutes
ID: 719059 Day: 3 Carrier: B6 Number: 687 Origin: Boston MA Dest: Los Angeles CA Duration: 345 Capacity: 1 Price: 609
Itinerary 1: 1 flight(s), 349 minutes
ID: 718966 Day: 3 Carrier: B6 Number: 487 Origin: Boston MA Dest: Los Angeles CA Duration: 349 Capacity: 3 Price: 689
Booking failed
Paid reservation: 1 remaining balance: 9311
Goodbye
|

# Possible output: Terminal 1 succeeds in user creation, but fails booking and terminal 2 pays
Created user user1
Logged in as user1
Itinerary 0: 1 flight(s), 345 minutes
ID: 719059 Day: 3 Carrier: B6 Number: 687 Origin: Boston MA Dest: Los Angeles CA Duration: 345 Capacity: 1 Price: 609
Itinerary 1: 1 flight(s), 349 minutes
ID: 718966 Day: 3 Carrier: B6 Number: 487 Origin: Boston MA Dest: Los Angeles CA Duration: 349 Capacity: 3 Price: 689
Booking failed
Cannot find unpaid reservation 1 under user: user1
Goodbye
|

# Possible output: Terminal 1 fails to create user (Terminal 2 already has
# created it), but succeeds in booking and pays
Failed to create user
Logged in as user1
Itinerary 0: 1 flight(s), 345 minutes
ID: 719059 Day: 3 Carrier: B6 Number: 687 Origin: Boston MA Dest: Los Angeles CA Duration: 345 Capacity: 1 Price: 609
Itinerary 1: 1 flight(s), 349 minutes
ID: 718966 Day: 3 Carrier: B6 Number: 487 Origin: Boston MA Dest: Los Angeles CA Duration: 349 Capacity: 3 Price: 689
Booked flight(s), reservation ID: 1
Paid reservation: 1 remaining balance: 9311
Goodbye
|

# Possible output: Terminal 1 fails to create user (Terminal 2 already has
# created it), but succeeds in booking and terminal 2 pays
Failed to create user
Logged in as user1
Itinerary 0: 1 flight(s), 345 minutes
ID: 719059 Day: 3 Carrier: B6 Number: 687 Origin: Boston MA Dest: Los Angeles CA Duration: 345 Capacity: 1 Price: 609
Itinerary 1: 1 flight(s), 349 minutes
ID: 718966 Day: 3 Carrier: B6 Number: 487 Origin: Boston MA Dest: Los Angeles CA Duration: 349 Capacity: 3 Price: 689
Booked flight(s), reservation ID: 1
Cannot find unpaid reservation 1 under user: user1
Goodbye
|

# Possible output: Terminal 1 fails to create user (Terminal 2 already has
# created it), and fails booking and pays
Failed to create user
Logged in as user1
Itinerary 0: 1 flight(s), 345 minutes
ID: 719059 Day: 3 Carrier: B6 Number: 687 Origin: Boston MA Dest: Los Angeles CA Duration: 345 Capacity: 1 Price: 609
Itinerary 1: 1 flight(s), 349 minutes
ID: 718966 Day: 3 Carrier: B6 Number: 487 Origin: Boston MA Dest: Los Angeles CA Duration: 349 Capacity: 3 Price: 689
Booking failed
Paid reservation: 1 remaining balance: 9311
Goodbye
|

# Possible output: Terminal 1 fails to create user (Terminal 2 already has
# created it), and fails booking and terminal 2pays
Failed to create user
Logged in as user1
Itinerary 0: 1 flight(s), 345 minutes
ID: 719059 Day: 3 Carrier: B6 Number: 687 Origin: Boston MA Dest: Los Angeles CA Duration: 345 Capacity: 1 Price: 609
Itinerary 1: 1 flight(s), 349 minutes
ID: 718966 Day: 3 Carrier: B6 Number: 487 Origin: Boston MA Dest: Los Angeles CA Duration: 349 Capacity: 3 Price: 689
Booking failed
Cannot find unpaid reservation 1 under user: user1
Goodbye
|

# Possible output: Terminal 1 succeeds in user creation *and* booking and pays
Created user user1
Logged in as user1
Itinerary 0: 1 flight(s), 345 minutes
ID: 719059 Day: 3 Carrier: B6 Number: 687 Origin: Boston MA Dest: Los Angeles CA Duration: 345 Capacity: 1 Price: 609
Itinerary 1: 1 flight(s), 349 minutes
ID: 718966 Day: 3 Carrier: B6 Number: 487 Origin: Boston MA Dest: Los Angeles CA Duration: 349 Capacity: 3 Price: 689
Booked flight(s), reservation ID: 1
Paid reservation: 1 remaining balance: 9311
Goodbye
|

# Possible output: Terminal 1 succeeds in user creation *and* booking and terminal 2 pays
Created user user1
Logged in as user1
Itinerary 0: 1 flight(s), 345 minutes
ID: 719059 Day: 3 Carrier: B6 Number: 687 Origin: Boston MA Dest: Los Angeles CA Duration: 345 Capacity: 1 Price: 609
Itinerary 1: 1 flight(s), 349 minutes
ID: 718966 Day: 3 Carrier: B6 Number: 487 Origin: Boston MA Dest: Los Angeles CA Duration: 349 Capacity: 3 Price: 689
Booked flight(s), reservation ID: 1
Cannot find unpaid reservation 1 under user: user1
Goodbye
|

# Possible output: Terminal 1 succeeds in user creation, but fails booking and pays
Created user user1
Logged in as user1
Itinerary 0: 1 flight(s), 345 minutes
ID: 719059 Day: 3 Carrier: B6 Number: 687 Origin: Boston MA Dest: Los Angeles CA Duration: 345 Capacity: 1 Price: 609
Itinerary 1: 1 flight(s), 349 minutes
ID: 718966 Day: 3 Carrier: B6 Number: 487 Origin: Boston MA Dest: Los Angeles CA Duration: 349 Capacity: 3 Price: 689
You cannot book two flights in the same day
Paid reservation: 1 remaining balance: 9311
Goodbye
|

# Possible output: Terminal 1 succeeds in user creation, but fails booking and terminal 2 pays
Created user user1
Logged in as user1
Itinerary 0: 1 flight(s), 345 minutes
ID: 719059 Day: 3 Carrier: B6 Number: 687 Origin: Boston MA Dest: Los Angeles CA Duration: 345 Capacity: 1 Price: 609
Itinerary 1: 1 flight(s), 349 minutes
ID: 718966 Day: 3 Carrier: B6 Number: 487 Origin: Boston MA Dest: Los Angeles CA Duration: 349 Capacity: 3 Price: 689
You cannot book two flights in the same day
Cannot find unpaid reservation 1 under user: user1
Goodbye
|

# Possible output: Terminal 1 fails to create user (Terminal 2 already has
# created it), but succeeds in booking and pays
Failed to create user
Logged in as user1
Itinerary 0: 1 flight(s), 345 minutes
ID: 719059 Day: 3 Carrier: B6 Number: 687 Origin: Boston MA Dest: Los Angeles CA Duration: 345 Capacity: 1 Price: 609
Itinerary 1: 1 flight(s), 349 minutes
ID: 718966 Day: 3 Carrier: B6 Number: 487 Origin: Boston MA Dest: Los Angeles CA Duration: 349 Capacity: 3 Price: 689
Booked flight(s), reservation ID: 1
Paid reservation: 1 remaining balance: 9311
Goodbye
|

# Possible output: Terminal 1 fails to create user (Terminal 2 already has
# created it), but succeeds in booking and terminal 2 pays
Failed to create user
Logged in as user1
Itinerary 0: 1 flight(s), 345 minutes
ID: 719059 Day: 3 Carrier: B6 Number: 687 Origin: Boston MA Dest: Los Angeles CA Duration: 345 Capacity: 1 Price: 609
Itinerary 1: 1 flight(s), 349 minutes
ID: 718966 Day: 3 Carrier: B6 Number: 487 Origin: Boston MA Dest: Los Angeles CA Duration: 349 Capacity: 3 Price: 689
Booked flight(s), reservation ID: 1
Cannot find unpaid reservation 1 under user: user1
Goodbye
|

# Possible output: Terminal 1 fails to create user (Terminal 2 already has
# created it), and also fails booking and pays 
Failed to create user
Logged in as user1
Itinerary 0: 1 flight(s), 345 minutes
ID: 719059 Day: 3 Carrier: B6 Number: 687 Origin: Boston MA Dest: Los Angeles CA Duration: 345 Capacity: 1 Price: 609
Itinerary 1: 1 flight(s), 349 minutes
ID: 718966 Day: 3 Carrier: B6 Number: 487 Origin: Boston MA Dest: Los Angeles CA Duration: 349 Capacity: 3 Price: 689
You cannot book two flights in the same day
Paid reservation: 1 remaining balance: 9311
Goodbye
|

# Possible output: Terminal 1 fails to create user (Terminal 2 already has
# created it), and also fails booking and terminal 2 pays 
Failed to create user
Logged in as user1
Itinerary 0: 1 flight(s), 345 minutes
ID: 719059 Day: 3 Carrier: B6 Number: 687 Origin: Boston MA Dest: Los Angeles CA Duration: 345 Capacity: 1 Price: 609
Itinerary 1: 1 flight(s), 349 minutes
ID: 718966 Day: 3 Carrier: B6 Number: 487 Origin: Boston MA Dest: Los Angeles CA Duration: 349 Capacity: 3 Price: 689
You cannot book two flights in the same day
Cannot find unpaid reservation 1 under user: user1
Goodbye
*

##################### Concurrently executed commands: #####################
# Terminal 2
create user1 user1 10000
login user1 user1
search "Boston MA" "Los Angeles CA" 1 3 2
book 1
pay 1
quit
*

# Possible output: Terminal 2 fails in user creation and booking and terminal 1 pays
Failed to create user
Logged in as user1
Itinerary 0: 1 flight(s), 345 minutes
ID: 719059 Day: 3 Carrier: B6 Number: 687 Origin: Boston MA Dest: Los Angeles CA Duration: 345 Capacity: 1 Price: 609
Itinerary 1: 1 flight(s), 349 minutes
ID: 718966 Day: 3 Carrier: B6 Number: 487 Origin: Boston MA Dest: Los Angeles CA Duration: 349 Capacity: 3 Price: 689
Booking failed
Cannot find unpaid reservation 1 under user: user1
Goodbye
|

# Possible output: Terminal 2 fails in user creation and booking and pays
Failed to create user
Logged in as user1
Itinerary 0: 1 flight(s), 345 minutes
ID: 719059 Day: 3 Carrier: B6 Number: 687 Origin: Boston MA Dest: Los Angeles CA Duration: 345 Capacity: 1 Price: 609
Itinerary 1: 1 flight(s), 349 minutes
ID: 718966 Day: 3 Carrier: B6 Number: 487 Origin: Boston MA Dest: Los Angeles CA Duration: 349 Capacity: 3 Price: 689
Booking failed
Paid reservation: 1 remaining balance: 9311
Goodbye
|

# Alternative output: Terminal 2 fails in user creation, but succeeds in booking and terminal 1 pays 
Failed to create user
Logged in as user1
Itinerary 0: 1 flight(s), 345 minutes
ID: 719059 Day: 3 Carrier: B6 Number: 687 Origin: Boston MA Dest: Los Angeles CA Duration: 345 Capacity: 1 Price: 609
Itinerary 1: 1 flight(s), 349 minutes
ID: 718966 Day: 3 Carrier: B6 Number: 487 Origin: Boston MA Dest: Los Angeles CA Duration: 349 Capacity: 3 Price: 689
Booked flight(s), reservation ID: 1
Cannot find unpaid reservation 1 under user: user1
Goodbye
|

# Alternative output: Terminal 2 fails in user creation, but succeeds in booking and pays 
Failed to create user
Logged in as user1
Itinerary 0: 1 flight(s), 345 minutes
ID: 719059 Day: 3 Carrier: B6 Number: 687 Origin: Boston MA Dest: Los Angeles CA Duration: 345 Capacity: 1 Price: 609
Itinerary 1: 1 flight(s), 349 minutes
ID: 718966 Day: 3 Carrier: B6 Number: 487 Origin: Boston MA Dest: Los Angeles CA Duration: 349 Capacity: 3 Price: 689
Booked flight(s), reservation ID: 1
Paid reservation: 1 remaining balance: 9311
Goodbye
|

# Alternative output: Terminal 2 succeeds in user creation, but fails booking and terminal 1 pays
Created user user1
Logged in as user1
Itinerary 0: 1 flight(s), 345 minutes
ID: 719059 Day: 3 Carrier: B6 Number: 687 Origin: Boston MA Dest: Los Angeles CA Duration: 345 Capacity: 1 Price: 609
Itinerary 1: 1 flight(s), 349 minutes
ID: 718966 Day: 3 Carrier: B6 Number: 487 Origin: Boston MA Dest: Los Angeles CA Duration: 349 Capacity: 3 Price: 689
Booking failed
Cannot find unpaid reservation 1 under user: user1
Goodbye
|

# Alternative output: Terminal 2 succeeds in user creation, but fails booking and pays
Created user user1
Logged in as user1
Itinerary 0: 1 flight(s), 345 minutes
ID: 719059 Day: 3 Carrier: B6 Number: 687 Origin: Boston MA Dest: Los Angeles CA Duration: 345 Capacity: 1 Price: 609
Itinerary 1: 1 flight(s), 349 minutes
ID: 718966 Day: 3 Carrier: B6 Number: 487 Origin: Boston MA Dest: Los Angeles CA Duration: 349 Capacity: 3 Price: 689
Booking failed
Paid reservation: 1 remaining balance: 9311
Goodbye
|

# Alternative output: Terminal 2 succeeds in user creation and booking and terminal 1 pays
Created user user1
Logged in as user1
Itinerary 0: 1 flight(s), 345 minutes
ID: 719059 Day: 3 Carrier: B6 Number: 687 Origin: Boston MA Dest: Los Angeles CA Duration: 345 Capacity: 1 Price: 609
Itinerary 1: 1 flight(s), 349 minutes
ID: 718966 Day: 3 Carrier: B6 Number: 487 Origin: Boston MA Dest: Los Angeles CA Duration: 349 Capacity: 3 Price: 689
Booked flight(s), reservation ID: 1
Cannot find unpaid reservation 1 under user: user1
Goodbye
|

# Alternative output: Terminal 2 succeeds in user creation and booking and pays
Created user user1
Logged in as user1
Itinerary 0: 1 flight(s), 345 minutes
ID: 719059 Day: 3 Carrier: B6 Number: 687 Origin: Boston MA Dest: Los Angeles CA Duration: 345 Capacity: 1 Price: 609
Itinerary 1: 1 flight(s), 349 minutes
ID: 718966 Day: 3 Carrier: B6 Number: 487 Origin: Boston MA Dest: Los Angeles CA Duration: 349 Capacity: 3 Price: 689
Booked flight(s), reservation ID: 1
Paid reservation: 1 remaining balance: 9311
Goodbye
|


# Alternative output: Terminal 2 fails in user creation and booking and terminal 1 pays
Failed to create user
Logged in as user1
Itinerary 0: 1 flight(s), 345 minutes
ID: 719059 Day: 3 Carrier: B6 Number: 687 Origin: Boston MA Dest: Los Angeles CA Duration: 345 Capacity: 1 Price: 609
Itinerary 1: 1 flight(s), 349 minutes
ID: 718966 Day: 3 Carrier: B6 Number: 487 Origin: Boston MA Dest: Los Angeles CA Duration: 349 Capacity: 3 Price: 689
You cannot book two flights in the same day
Cannot find unpaid reservation 1 under user: user1
Goodbye
|

# Alternative output: Terminal 2 fails in user creation and booking and pays
Failed to create user
Logged in as user1
Itinerary 0: 1 flight(s), 345 minutes
ID: 719059 Day: 3 Carrier: B6 Number: 687 Origin: Boston MA Dest: Los Angeles CA Duration: 345 Capacity: 1 Price: 609
Itinerary 1: 1 flight(s), 349 minutes
ID: 718966 Day: 3 Carrier: B6 Number: 487 Origin: Boston MA Dest: Los Angeles CA Duration: 349 Capacity: 3 Price: 689
You cannot book two flights in the same day
Paid reservation: 1 remaining balance: 9311
Goodbye
|

# Alternative output: Terminal 2 fails in user creation, but succeeds booking and terminal 1 pays
Failed to create user
Logged in as user1
Itinerary 0: 1 flight(s), 345 minutes
ID: 719059 Day: 3 Carrier: B6 Number: 687 Origin: Boston MA Dest: Los Angeles CA Duration: 345 Capacity: 1 Price: 609
Itinerary 1: 1 flight(s), 349 minutes
ID: 718966 Day: 3 Carrier: B6 Number: 487 Origin: Boston MA Dest: Los Angeles CA Duration: 349 Capacity: 3 Price: 689
Booked flight(s), reservation ID: 1
Cannot find unpaid reservation 1 under user: user1
Goodbye
|

# Alternative output: Terminal 2 fails in user creation, but succeeds booking and pays
Failed to create user
Logged in as user1
Itinerary 0: 1 flight(s), 345 minutes
ID: 719059 Day: 3 Carrier: B6 Number: 687 Origin: Boston MA Dest: Los Angeles CA Duration: 345 Capacity: 1 Price: 609
Itinerary 1: 1 flight(s), 349 minutes
ID: 718966 Day: 3 Carrier: B6 Number: 487 Origin: Boston MA Dest: Los Angeles CA Duration: 349 Capacity: 3 Price: 689
Booked flight(s), reservation ID: 1
Paid reservation: 1 remaining balance: 9311
Goodbye
|

# Alternative output: Terminal 2 succeeds in user creation, but fails booking and terminal 1 pays
Created user user1
Logged in as user1
Itinerary 0: 1 flight(s), 345 minutes
ID: 719059 Day: 3 Carrier: B6 Number: 687 Origin: Boston MA Dest: Los Angeles CA Duration: 345 Capacity: 1 Price: 609
Itinerary 1: 1 flight(s), 349 minutes
ID: 718966 Day: 3 Carrier: B6 Number: 487 Origin: Boston MA Dest: Los Angeles CA Duration: 349 Capacity: 3 Price: 689
You cannot book two flights in the same day
Cannot find unpaid reservation 1 under user: user1
Goodbye
|

# Alternative output: Terminal 2 succeeds in user creation, but fails booking and pays
Created user user1
Logged in as user1
Itinerary 0: 1 flight(s), 345 minutes
ID: 719059 Day: 3 Carrier: B6 Number: 687 Origin: Boston MA Dest: Los Angeles CA Duration: 345 Capacity: 1 Price: 609
Itinerary 1: 1 flight(s), 349 minutes
ID: 718966 Day: 3 Carrier: B6 Number: 487 Origin: Boston MA Dest: Los Angeles CA Duration: 349 Capacity: 3 Price: 689
You cannot book two flights in the same day
Paid reservation: 1 remaining balance: 9311
Goodbye
|

# Alternative output: Terminal 2 succeeds in user creation and booking and terminal 1 pays
Created user user1
Logged in as user1
Itinerary 0: 1 flight(s), 345 minutes
ID: 719059 Day: 3 Carrier: B6 Number: 687 Origin: Boston MA Dest: Los Angeles CA Duration: 345 Capacity: 1 Price: 609
Itinerary 1: 1 flight(s), 349 minutes
ID: 718966 Day: 3 Carrier: B6 Number: 487 Origin: Boston MA Dest: Los Angeles CA Duration: 349 Capacity: 3 Price: 689
Booked flight(s), reservation ID: 1
Cannot find unpaid reservation 1 under user: user1
Goodbye
|

# Alternative output: Terminal 2 succeeds in user creation and booking and pays
Created user user1
Logged in as user1
Itinerary 0: 1 flight(s), 345 minutes
ID: 719059 Day: 3 Carrier: B6 Number: 687 Origin: Boston MA Dest: Los Angeles CA Duration: 345 Capacity: 1 Price: 609
Itinerary 1: 1 flight(s), 349 minutes
ID: 718966 Day: 3 Carrier: B6 Number: 487 Origin: Boston MA Dest: Los Angeles CA Duration: 349 Capacity: 3 Price: 689
Booked flight(s), reservation ID: 1
Paid reservation: 1 remaining balance: 9311
Goodbye
*
